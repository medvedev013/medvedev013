name: Update README with Latest Blog Posts

on:
  schedule:
    - cron: '0 * * * *' # –ö–∞–∂–¥—ã–π —á–∞—Å
  workflow_dispatch: # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          fetch-depth: 0 # –í–∞–∂–Ω–æ! –ß—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π

      - name: Fetch latest blog posts from Dev.to
        uses: gautamkrishnar/blog-post-workflow@v1.10
        with:
          max_post_count: "4"
          feed_list: "https://dev.to/feed/medvedev013" # üî• –£–ë–†–ê–õ –ü–†–û–ë–ï–õ–´ –í –ö–û–ù–¶–ï!
          template: |
            <!-- BLOG-POST-LIST:START -->
            ## üìù Latest Articles

            {{#each posts}}
            - [{{title}}]({{link}}) ‚Äî _{{date}}_
            {{/each}}
            <!-- BLOG-POST-LIST:END -->

      - name: Check for changes and commit
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add README.md
          if git diff --cached --quiet; then
            echo "‚úÖ No changes detected. README is up to date."
          else
            git commit -m "chore: update README with latest blog posts"
            git push
            echo "‚úÖ README updated successfully!"
          fi